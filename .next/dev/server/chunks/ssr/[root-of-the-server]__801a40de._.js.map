{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///Users/rashafaheem/Desktop/todo-app/src/app/lib/supabase-client.ts"],"sourcesContent":["import { createClient } from \"@supabase/supabase-js\";\n\n// .env file\nconst supabaseUrl=process.env.NEXT_PUBLIC_SUPABASE_URL!;\nconst supabaseAnonKey=process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!;\n\n// supabase client\nexport const supabase=createClient(supabaseUrl, supabaseAnonKey);"],"names":[],"mappings":";;;;AAAA;;AAEA,YAAY;AACZ,MAAM;AACN,MAAM;AAGC,MAAM,WAAS,IAAA,uMAAY,EAAC,aAAa","debugId":null}},
    {"offset": {"line": 42, "column": 0}, "map": {"version":3,"sources":["file:///Users/rashafaheem/Desktop/todo-app/src/app/components/common/Input.tsx"],"sourcesContent":["// app/components/ui/input.tsx\n\"use client\";\n\nimport React, { InputHTMLAttributes } from \"react\";\n\nexport const Input = React.forwardRef<HTMLInputElement, InputHTMLAttributes<HTMLInputElement>>(\n  ({ className, ...props }, ref) => {\n    return (\n      <input\n        ref={ref}\n        className={`border rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 ${className}`}\n        {...props}\n      />\n    );\n  }\n);\n\nInput.displayName = \"Input\";\n"],"names":[],"mappings":"AAAA,8BAA8B;;;;;;AAG9B;AAFA;;;AAIO,MAAM,sBAAQ,gNAAK,CAAC,UAAU,CACnC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE;IACxB,qBACE,8OAAC;QACC,KAAK;QACL,WAAW,CAAC,gFAAgF,EAAE,WAAW;QACxG,GAAG,KAAK;;;;;;AAGf;AAGF,MAAM,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 68, "column": 0}, "map": {"version":3,"sources":["file:///Users/rashafaheem/Desktop/todo-app/src/app/components/todo/ChatBot.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useRef, useEffect } from \"react\";\nimport { createClient } from \"@supabase/supabase-js\";\nimport { Card, CardContent, CardHeader, CardTitle, CardDescription } from \"../common/Card\";\nimport { Input } from \"../common/Input\";\nimport Button from \"../common/Buttons\";\nimport { ScrollArea } from \"../common/ScrollArea\";\nimport { Send, Bot, User, X, Trash2 } from \"lucide-react\";\n\ninterface Message {\n  id: string;\n  role: \"user\" | \"assistant\";\n  content: string;\n  timestamp: string;\n}\n\nexport function TodoChatbot({ onClose }: { onClose: () => void }) {\n  const [messages, setMessages] = useState<Message[]>([\n    { \n      id: \"1\", \n      role: \"assistant\", \n      content: \"Hi! I'm your todo assistant. Ask me about your tasks, completion rates, or when you completed specific tasks. For example: 'How many todos did I complete this week?' or 'When did I complete my project report?'\", \n      timestamp: new Date().toISOString() \n    }\n  ]);\n  const [input, setInput] = useState(\"\");\n  const [isLoading, setIsLoading] = useState(false);\n  const [userId, setUserId] = useState<string | null>(null);\n  const [authError, setAuthError] = useState<string | null>(null);\n  const scrollRef = useRef<HTMLDivElement>(null);\n\n  // Get authenticated user on component mount\n  useEffect(() => {\n    const getUser = async () => {\n      try {\n        const supabase = createClient(\n          process.env.NEXT_PUBLIC_SUPABASE_URL!,\n          process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!\n        );\n\n        const { data, error } = await supabase.auth.getUser();\n\n        if (error) {\n          console.error(\"Auth error:\", error);\n          setAuthError(\"Failed to get user authentication\");\n          return;\n        }\n\n        if (data.user) {\n          console.log(\"User authenticated:\", data.user.id);\n          setUserId(data.user.id);\n          // Load chat history from localStorage\n          loadChatHistory(data.user.id);\n        } else {\n          setAuthError(\"No user found. Please log in.\");\n        }\n      } catch (err) {\n        console.error(\"Error getting user:\", err);\n        setAuthError(\"Error retrieving authentication\");\n      }\n    };\n\n    getUser();\n  }, []);\n\n  // Auto scroll to bottom when new messages arrive\n  useEffect(() => {\n    if (scrollRef.current) {\n      setTimeout(() => {\n        if (scrollRef.current) {\n          scrollRef.current.scrollTop = scrollRef.current.scrollHeight;\n        }\n      }, 0);\n    }\n  }, [messages]);\n\n  // Load chat history from localStorage\n  const loadChatHistory = (uid: string) => {\n    try {\n      const saved = localStorage.getItem(`chatbot_history_${uid}`);\n      if (saved) {\n        const history = JSON.parse(saved);\n        if (Array.isArray(history) && history.length > 0) {\n          setMessages(history);\n        }\n      }\n    } catch (err) {\n      console.error(\"Error loading chat history:\", err);\n    }\n  };\n\n  // Save chat history to localStorage\n  const saveChatHistory = (msgs: Message[]) => {\n    if (userId) {\n      try {\n        localStorage.setItem(`chatbot_history_${userId}`, JSON.stringify(msgs));\n      } catch (err) {\n        console.error(\"Error saving chat history:\", err);\n      }\n    }\n  };\n\n  // Clear chat history\n  const clearChatHistory = () => {\n    if (userId && window.confirm(\"Are you sure you want to clear the chat history?\")) {\n      setMessages([\n        { \n          id: \"1\", \n          role: \"assistant\", \n          content: \"Hi! I'm your todo assistant. Chat history cleared. Ask me about your tasks!\", \n          timestamp: new Date().toISOString() \n        }\n      ]);\n      try {\n        localStorage.removeItem(`chatbot_history_${userId}`);\n      } catch (err) {\n        console.error(\"Error clearing chat history:\", err);\n      }\n    }\n  };\n\n  const handleSend = async () => {\n    if (!input.trim() || isLoading) return;\n\n    if (!userId) {\n      setMessages(prev => [...prev, { \n        id: Date.now().toString(), \n        role: \"assistant\", \n        content: authError || \"Error: Not authenticated. Please refresh the page and log in.\", \n        timestamp: new Date().toISOString() \n      }]);\n      return;\n    }\n\n    const userMessage: Message = { \n      id: Date.now().toString(), \n      role: \"user\", \n      content: input, \n      timestamp: new Date().toISOString() \n    };\n    \n    const updatedMessages = [...messages, userMessage];\n    setMessages(updatedMessages);\n    saveChatHistory(updatedMessages);\n    setInput(\"\");\n    setIsLoading(true);\n\n    try {\n      const FUNCTION_URL = \"/api/chatbot\";\n      console.log(\"Sending to:\", FUNCTION_URL);\n      console.log(\"User ID:\", userId);\n      console.log(\"Query:\", userMessage.content);\n\n      const response = await fetch(FUNCTION_URL, {\n        method: \"POST\",\n        headers: { \n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify({\n          query: userMessage.content,\n          user_id: userId,\n        }),\n      });\n\n      console.log(\"Response status:\", response.status);\n\n      if (!response.ok) {\n        let errorMsg = \"Failed to get response\";\n        try {\n          const errData = await response.json();\n          errorMsg = errData.error || JSON.stringify(errData);\n        } catch {\n          const text = await response.text();\n          errorMsg = `HTTP ${response.status}: ${text}`;\n        }\n        console.error(\"API Error:\", errorMsg);\n        throw new Error(errorMsg);\n      }\n\n      const data = await response.json();\n      console.log(\"AI Response:\", data.reply?.substring(0, 50) + \"...\");\n\n      const assistantMessage: Message = { \n        id: (Date.now() + 1).toString(), \n        role: \"assistant\", \n        content: data.reply, \n        timestamp: new Date().toISOString() \n      };\n      \n      const finalMessages = [...updatedMessages, assistantMessage];\n      setMessages(finalMessages);\n      saveChatHistory(finalMessages);\n\n    } catch (err) {\n      const errorMsg = err instanceof Error ? err.message : \"Something went wrong.\";\n      console.error(\"Chat error:\", errorMsg);\n      const errorMessage: Message = { \n        id: (Date.now() + 1).toString(), \n        role: \"assistant\", \n        content: `Error: ${errorMsg}`, \n        timestamp: new Date().toISOString() \n      };\n      const finalMessages = [...updatedMessages, errorMessage];\n      setMessages(finalMessages);\n      saveChatHistory(finalMessages);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"h-full flex flex-col bg-white rounded-lg border-0 overflow-hidden\">\n      {/* Header */}\n      <div className=\"border-b border-gray-200 p-4 bg-white flex justify-between items-center flex-shrink-0\">\n        <div className=\"flex-1\">\n          <div className=\"flex items-center gap-2\">\n            <Bot className=\"h-5 w-5 text-blue-600\" /> \n            <h2 className=\"text-lg font-bold\">Todo Assistant</h2>\n          </div>\n          <p className=\"text-xs text-gray-500 mt-1\">\n            {userId ? \"Ask me anything about your tasks\" : \"Loading...\"}\n          </p>\n        </div>\n        <div className=\"flex gap-2\">\n          <button \n            onClick={clearChatHistory}\n            title=\"Clear chat history\"\n            className=\"p-2 hover:bg-gray-100 rounded-lg transition-colors\"\n          >\n            <Trash2 className=\"h-4 w-4 text-gray-600\" />\n          </button>\n          <button \n            onClick={onClose}\n            className=\"p-2 hover:bg-gray-100 rounded-lg transition-colors\"\n          >\n            <X className=\"h-4 w-4 text-gray-600\" />\n          </button>\n        </div>\n      </div>\n\n      {/* Messages Area - Fully Scrollable */}\n      <div className=\"flex-1 overflow-y-auto p-4 space-y-4 bg-gray-50\" ref={scrollRef}>\n        {messages.map(msg => (\n          <div key={msg.id} className={`flex gap-3 ${msg.role === \"user\" ? \"justify-end\" : \"justify-start\"}`}>\n            {msg.role === \"assistant\" && (\n              <div className=\"h-8 w-8 rounded-full bg-blue-500 flex items-center justify-center flex-shrink-0\">\n                <Bot className=\"h-4 w-4 text-white\" />\n              </div>\n            )}\n            <div className={`rounded-lg px-4 py-2 max-w-[70%] break-words ${msg.role === \"user\" ? \"bg-blue-500 text-white\" : \"bg-white text-gray-900 border border-gray-200\"}`}>\n              <p className=\"text-sm whitespace-pre-wrap\">{msg.content}</p>\n              <span className={`text-xs mt-1 block ${msg.role === \"user\" ? \"text-blue-100\" : \"text-gray-500\"}`}>\n                {new Date(msg.timestamp).toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit' })}\n              </span>\n            </div>\n            {msg.role === \"user\" && (\n              <div className=\"h-8 w-8 rounded-full bg-gray-400 flex items-center justify-center flex-shrink-0\">\n                <User className=\"h-4 w-4 text-white\" />\n              </div>\n            )}\n          </div>\n        ))}\n        {isLoading && (\n          <div className=\"flex gap-3 justify-start\">\n            <div className=\"h-8 w-8 rounded-full bg-blue-500 flex items-center justify-center flex-shrink-0\">\n              <Bot className=\"h-4 w-4 text-white\" />\n            </div>\n            <div className=\"rounded-lg px-4 py-2 bg-white border border-gray-200\">\n              <p className=\"text-sm text-gray-600 animate-pulse\">Thinking...</p>\n            </div>\n          </div>\n        )}\n      </div>\n\n      {/* Input Area - Fixed at Bottom */}\n      <div className=\"border-t border-gray-200 p-4 bg-white flex gap-2 flex-shrink-0\">\n        <Input \n          value={input} \n          onChange={e => setInput(e.target.value)} \n          onKeyDown={e => e.key === \"Enter\" && !e.shiftKey && handleSend()} \n          placeholder=\"Ask about your todos...\" \n          disabled={isLoading || !userId}\n          className=\"flex-1\"\n        />\n        <button \n          onClick={handleSend} \n          disabled={isLoading || !userId}\n          className=\"bg-blue-500 hover:bg-blue-600 disabled:bg-gray-300 text-white p-2 rounded-lg transition-colors\"\n        >\n          <Send className=\"h-4 w-4\" />\n        </button>\n      </div>\n    </div>\n  );\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 524, "column": 0}, "map": {"version":3,"sources":["file:///Users/rashafaheem/Desktop/todo-app/src/app/components/common/ChatBotIcon.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState } from \"react\";\nimport { MessageCircle, X } from \"lucide-react\";\nimport { TodoChatbot } from \"../todo/ChatBot\";\n\nexport function ChatbotIcon() {\n  const [isOpen, setIsOpen] = useState(false);\n\n  return (\n    <>\n      {!isOpen && (\n        <button\n          onClick={() => setIsOpen(true)}\n          className=\"fixed bottom-6 right-6 bg-primary hover:bg-primary/90 text-primary-foreground p-4 rounded-full shadow-lg hover:shadow-xl transition-all duration-200 z-40 flex items-center justify-center\"\n          title=\"Open Todo Assistant\"\n        >\n          <MessageCircle className=\"h-6 w-6\" />\n        </button>\n      )}\n\n      {/* Chat Dialog */}\n      {isOpen && (\n        <div className=\"fixed bottom-6 right-6 z-50 w-96 max-h-[600px] rounded-lg shadow-2xl overflow-hidden bg-background\">\n          <TodoChatbot onClose={() => setIsOpen(false)} />\n        </div>\n      )}\n    </>\n  );\n}"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAJA;;;;;AAMO,SAAS;IACd,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,iNAAQ,EAAC;IAErC,qBACE;;YACG,CAAC,wBACA,8OAAC;gBACC,SAAS,IAAM,UAAU;gBACzB,WAAU;gBACV,OAAM;0BAEN,cAAA,8OAAC,yOAAa;oBAAC,WAAU;;;;;;;;;;;YAK5B,wBACC,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC,2JAAW;oBAAC,SAAS,IAAM,UAAU;;;;;;;;;;;;;AAKhD","debugId":null}},
    {"offset": {"line": 578, "column": 0}, "map": {"version":3,"sources":["file:///Users/rashafaheem/Desktop/todo-app/src/app/%28protected%29/layout.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useEffect } from \"react\";\nimport { useRouter } from \"next/navigation\";\nimport { supabase } from \"../lib/supabase-client\";\nimport { CheckCircle2, LogOut, User, MessageCircle } from \"lucide-react\";\nimport { ChatbotIcon } from \"../components/common/ChatBotIcon\";\nimport type { User as SupabaseUser } from \"@supabase/supabase-js\";\n\nexport default function ProtectedLayout({\n  children,\n}: {\n  children: React.ReactNode;\n}) {\n  const router = useRouter();\n  const [user, setUser] = useState<SupabaseUser | null>(null);\n  const [menuOpen, setMenuOpen] = useState(false);\n  const [chatbotOpen, setChatbotOpen] = useState(false);\n\n  useEffect(() => {\n    const fetchUser = async () => {\n      const { data, error } = await supabase.auth.getUser();\n      if (error || !data.user) {\n        router.push(\"/auth/signin\");\n        return;\n      }\n      setUser(data.user);\n    };\n\n    fetchUser();\n\n    const { data: listener } = supabase.auth.onAuthStateChange(\n      async (_, session) => {\n        if (!session) router.push(\"/auth/signin\");\n        else setUser(session.user);\n      }\n    );\n\n    return () => {\n      listener.subscription.unsubscribe();\n    };\n  }, [router]);\n\n  const handleLogout = async () => {\n    await supabase.auth.signOut();\n    router.push(\"/auth/signin\");\n  };\n\n  if (!user)\n    return (\n      <div className=\"min-h-screen flex items-center justify-center text-lg font-semibold\">\n        Loading user session...\n      </div>\n    );\n\n  const fullName = user.user_metadata?.full_name || \"\";\n  const email = user.email || \"\";\n\n  return (\n    <div className=\"min-h-screen bg-gray-100 text-gray-900\">\n      <header className=\"bg-white shadow-sm sticky top-0 z-40\">\n        <div className=\"max-w-6xl mx-auto px-4 py-4 flex justify-between items-center\">\n          <div\n            className=\"flex items-center gap-2 cursor-pointer\"\n            onClick={() => router.push(\"/todos\")}\n          >\n            <CheckCircle2 className=\"text-blue-600 w-7 h-7\" />\n            <h1 className=\"text-xl font-bold\">My Todo App</h1>\n          </div>\n\n          <div className=\"flex items-center gap-4\">\n            {/* Chatbot Icon Button */}\n            <button\n              onClick={() => setChatbotOpen(!chatbotOpen)}\n              className=\"flex items-center justify-center w-10 h-10 rounded-full bg-blue-500 hover:bg-blue-600 text-white transition-colors duration-200\"\n              title=\"Open Todo Assistant\"\n            >\n              <MessageCircle className=\"w-5 h-5\" />\n            </button>\n\n            {/* Avatar and Menu */}\n            <div className=\"relative\">\n              <button\n                onClick={() => setMenuOpen(!menuOpen)}\n                className=\"flex items-center justify-center w-10 h-10 rounded-full bg-blue-500 text-white font-semibold overflow-hidden hover:ring-2 hover:ring-blue-300 transition-all\"\n              >\n                {user.user_metadata?.avatar_url ? (\n                  <img\n                    src={user.user_metadata.avatar_url}\n                    alt=\"Avatar\"\n                    className=\"w-full h-full object-cover\"\n                  />\n                ) : (\n                  (fullName || email)[0].toUpperCase()\n                )}\n              </button>\n\n              {menuOpen && (\n                <div className=\"absolute right-0 mt-2 w-55 bg-white border rounded-lg shadow-lg py-2 z-50\">\n                  <div className=\"px-4 py-2 border-b\">\n                    <p className=\"text-sm font-medium\">\n                      {fullName || email.split(\"@\")[0]}\n                    </p>\n                    <p className=\"text-xs text-gray-500\">{email}</p>\n                  </div>\n\n                  <button\n                    onClick={() => {\n                      router.push(\"/profile/profile-settings\");\n                      setMenuOpen(false);\n                    }}\n                    className=\"w-full text-left px-4 py-2 text-sm hover:bg-gray-100 flex items-center gap-2\"\n                  >\n                    <User className=\"h-4 w-4\" /> Profile\n                  </button>\n\n                  <button\n                    onClick={handleLogout}\n                    className=\"w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-gray-100 flex items-center gap-2\"\n                  >\n                    <LogOut className=\"h-4 w-4\" /> Log out\n                  </button>\n                </div>\n              )}\n            </div>\n          </div>\n        </div>\n      </header>\n\n      <main className=\"max-w-5xl mx-auto p-6\">{children}</main>\n\n      {/* Chatbot Modal */}\n      {chatbotOpen && (\n        <div className=\"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4\">\n          <div className=\"bg-white rounded-lg shadow-2xl w-full max-w-2xl h-[85vh] flex flex-col\">\n            <ChatbotIcon onClose={() => setChatbotOpen(false)} />\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AANA;;;;;;;AASe,SAAS,gBAAgB,EACtC,QAAQ,EAGT;IACC,MAAM,SAAS,IAAA,+IAAS;IACxB,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,iNAAQ,EAAsB;IACtD,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAC;IACzC,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,iNAAQ,EAAC;IAE/C,IAAA,kNAAS,EAAC;QACR,MAAM,YAAY;YAChB,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,mJAAQ,CAAC,IAAI,CAAC,OAAO;YACnD,IAAI,SAAS,CAAC,KAAK,IAAI,EAAE;gBACvB,OAAO,IAAI,CAAC;gBACZ;YACF;YACA,QAAQ,KAAK,IAAI;QACnB;QAEA;QAEA,MAAM,EAAE,MAAM,QAAQ,EAAE,GAAG,mJAAQ,CAAC,IAAI,CAAC,iBAAiB,CACxD,OAAO,GAAG;YACR,IAAI,CAAC,SAAS,OAAO,IAAI,CAAC;iBACrB,QAAQ,QAAQ,IAAI;QAC3B;QAGF,OAAO;YACL,SAAS,YAAY,CAAC,WAAW;QACnC;IACF,GAAG;QAAC;KAAO;IAEX,MAAM,eAAe;QACnB,MAAM,mJAAQ,CAAC,IAAI,CAAC,OAAO;QAC3B,OAAO,IAAI,CAAC;IACd;IAEA,IAAI,CAAC,MACH,qBACE,8OAAC;QAAI,WAAU;kBAAsE;;;;;;IAKzF,MAAM,WAAW,KAAK,aAAa,EAAE,aAAa;IAClD,MAAM,QAAQ,KAAK,KAAK,IAAI;IAE5B,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAO,WAAU;0BAChB,cAAA,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BACC,WAAU;4BACV,SAAS,IAAM,OAAO,IAAI,CAAC;;8CAE3B,8OAAC,qOAAY;oCAAC,WAAU;;;;;;8CACxB,8OAAC;oCAAG,WAAU;8CAAoB;;;;;;;;;;;;sCAGpC,8OAAC;4BAAI,WAAU;;8CAEb,8OAAC;oCACC,SAAS,IAAM,eAAe,CAAC;oCAC/B,WAAU;oCACV,OAAM;8CAEN,cAAA,8OAAC,yOAAa;wCAAC,WAAU;;;;;;;;;;;8CAI3B,8OAAC;oCAAI,WAAU;;sDACb,8OAAC;4CACC,SAAS,IAAM,YAAY,CAAC;4CAC5B,WAAU;sDAET,KAAK,aAAa,EAAE,2BACnB,8OAAC;gDACC,KAAK,KAAK,aAAa,CAAC,UAAU;gDAClC,KAAI;gDACJ,WAAU;;;;;uDAGZ,CAAC,YAAY,KAAK,CAAC,CAAC,EAAE,CAAC,WAAW;;;;;;wCAIrC,0BACC,8OAAC;4CAAI,WAAU;;8DACb,8OAAC;oDAAI,WAAU;;sEACb,8OAAC;4DAAE,WAAU;sEACV,YAAY,MAAM,KAAK,CAAC,IAAI,CAAC,EAAE;;;;;;sEAElC,8OAAC;4DAAE,WAAU;sEAAyB;;;;;;;;;;;;8DAGxC,8OAAC;oDACC,SAAS;wDACP,OAAO,IAAI,CAAC;wDACZ,YAAY;oDACd;oDACA,WAAU;;sEAEV,8OAAC,0MAAI;4DAAC,WAAU;;;;;;wDAAY;;;;;;;8DAG9B,8OAAC;oDACC,SAAS;oDACT,WAAU;;sEAEV,8OAAC,oNAAM;4DAAC,WAAU;;;;;;wDAAY;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;0BAS5C,8OAAC;gBAAK,WAAU;0BAAyB;;;;;;YAGxC,6BACC,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC;oBAAI,WAAU;8BACb,cAAA,8OAAC,iKAAW;wBAAC,SAAS,IAAM,eAAe;;;;;;;;;;;;;;;;;;;;;;AAMvD","debugId":null}}]
}