{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/rashafaheem/Desktop/todo-app/src/app/lib/supabase-client.ts"],"sourcesContent":["import { createClient } from \"@supabase/supabase-js\";\n\n// .env file\nconst supabaseUrl=process.env.NEXT_PUBLIC_SUPABASE_URL!;\nconst supabaseAnonKey=process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!;\n\n// supabase client\nexport const supabase=createClient(supabaseUrl, supabaseAnonKey);"],"names":[],"mappings":";;;;AAGkB;AAHlB;;AAEA,YAAY;AACZ,MAAM;AACN,MAAM;AAGC,MAAM,WAAS,IAAA,0MAAY,EAAC,aAAa","debugId":null}},
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":["file:///Users/rashafaheem/Desktop/todo-app/src/app/components/common/Card.tsx"],"sourcesContent":["// app/components/ui/card.tsx\n\"use client\";\n\nimport React, { HTMLAttributes, ReactNode } from \"react\";\n\nexport const Card = ({ children, className }: { children: ReactNode; className?: string }) => {\n  return <div className={`bg-white rounded-lg shadow-md ${className}`}>{children}</div>;\n};\n\nexport const CardHeader = ({ children, className }: { children: ReactNode; className?: string }) => {\n  return <div className={`px-4 py-2 border-b ${className}`}>{children}</div>;\n};\n\nexport const CardTitle = ({ children, className }: { children: ReactNode; className?: string }) => {\n  return <h3 className={`text-lg font-semibold ${className}`}>{children}</h3>;\n};\n\nexport const CardDescription = ({ children, className }: { children: ReactNode; className?: string }) => {\n  return <p className={`text-sm text-gray-500 ${className}`}>{children}</p>;\n};\n\nexport const CardContent = ({ children, className }: { children: ReactNode; className?: string }) => {\n  return <div className={`p-4 ${className}`}>{children}</div>;\n};\n"],"names":[],"mappings":"AAAA,6BAA6B;;;;;;;;;;;;;;AAC7B;;AAIO,MAAM,OAAO,CAAC,EAAE,QAAQ,EAAE,SAAS,EAA+C;IACvF,qBAAO,6LAAC;QAAI,WAAW,CAAC,8BAA8B,EAAE,WAAW;kBAAG;;;;;;AACxE;KAFa;AAIN,MAAM,aAAa,CAAC,EAAE,QAAQ,EAAE,SAAS,EAA+C;IAC7F,qBAAO,6LAAC;QAAI,WAAW,CAAC,mBAAmB,EAAE,WAAW;kBAAG;;;;;;AAC7D;MAFa;AAIN,MAAM,YAAY,CAAC,EAAE,QAAQ,EAAE,SAAS,EAA+C;IAC5F,qBAAO,6LAAC;QAAG,WAAW,CAAC,sBAAsB,EAAE,WAAW;kBAAG;;;;;;AAC/D;MAFa;AAIN,MAAM,kBAAkB,CAAC,EAAE,QAAQ,EAAE,SAAS,EAA+C;IAClG,qBAAO,6LAAC;QAAE,WAAW,CAAC,sBAAsB,EAAE,WAAW;kBAAG;;;;;;AAC9D;MAFa;AAIN,MAAM,cAAc,CAAC,EAAE,QAAQ,EAAE,SAAS,EAA+C;IAC9F,qBAAO,6LAAC;QAAI,WAAW,CAAC,IAAI,EAAE,WAAW;kBAAG;;;;;;AAC9C;MAFa","debugId":null}},
    {"offset": {"line": 106, "column": 0}, "map": {"version":3,"sources":["file:///Users/rashafaheem/Desktop/todo-app/src/app/components/common/Input.tsx"],"sourcesContent":["// app/components/ui/input.tsx\n\"use client\";\n\nimport React, { InputHTMLAttributes } from \"react\";\n\nexport const Input = React.forwardRef<HTMLInputElement, InputHTMLAttributes<HTMLInputElement>>(\n  ({ className, ...props }, ref) => {\n    return (\n      <input\n        ref={ref}\n        className={`border rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 ${className}`}\n        {...props}\n      />\n    );\n  }\n);\n\nInput.displayName = \"Input\";\n"],"names":[],"mappings":"AAAA,8BAA8B;;;;;;AAG9B;AAFA;;;AAIO,MAAM,sBAAQ,wKAAK,CAAC,UAAU,MACnC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE;IACxB,qBACE,6LAAC;QACC,KAAK;QACL,WAAW,CAAC,gFAAgF,EAAE,WAAW;QACxG,GAAG,KAAK;;;;;;AAGf;;AAGF,MAAM,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 139, "column": 0}, "map": {"version":3,"sources":["file:///Users/rashafaheem/Desktop/todo-app/src/app/components/common/Buttons.tsx"],"sourcesContent":["import React from \"react\";\n\ninterface ButtonProps extends React.ButtonHTMLAttributes<HTMLButtonElement> {\n  variant?: \"primary\" | \"secondary\" | \"danger\";\n  size?: \"sm\" | \"md\" | \"lg\";\n  children: React.ReactNode;\n}\n\nexport const Button = ({\n  variant = \"primary\",\n  size = \"md\",\n  children,\n  className = \"\",\n  ...props\n}: ButtonProps) => {\n  // Base classes\n  let baseClasses =\n    \"rounded-md font-medium transition disabled:opacity-50 disabled:cursor-not-allowed\";\n\n  // Size variants\n  let sizeClasses = \"\";\n  switch (size) {\n    case \"sm\":\n      sizeClasses = \"py-1 px-2 text-sm\";\n      break;\n    case \"md\":\n      sizeClasses = \"py-2 px-4 text-base\";\n      break;\n    case \"lg\":\n      sizeClasses = \"py-3 px-6 text-lg\";\n      break;\n  }\n\n  // Color variants\n  let variantClasses = \"\";\n  switch (variant) {\n    case \"primary\":\n      variantClasses = \"bg-blue-600 text-white hover:bg-blue-700\";\n      break;\n    case \"secondary\":\n      variantClasses = \"bg-gray-200 text-gray-800 hover:bg-gray-300\";\n      break;\n    case \"danger\":\n      variantClasses = \"bg-red-600 text-white hover:bg-red-700\";\n      break;\n  }\n\n  return (\n    <button\n      className={`${baseClasses} ${sizeClasses} ${variantClasses} ${className}`}\n      {...props}\n    >\n      {children}\n    </button>\n  );\n};\n\nexport default Button;\n"],"names":[],"mappings":";;;;;;;;AAQO,MAAM,SAAS,CAAC,EACrB,UAAU,SAAS,EACnB,OAAO,IAAI,EACX,QAAQ,EACR,YAAY,EAAE,EACd,GAAG,OACS;IACZ,eAAe;IACf,IAAI,cACF;IAEF,gBAAgB;IAChB,IAAI,cAAc;IAClB,OAAQ;QACN,KAAK;YACH,cAAc;YACd;QACF,KAAK;YACH,cAAc;YACd;QACF,KAAK;YACH,cAAc;YACd;IACJ;IAEA,iBAAiB;IACjB,IAAI,iBAAiB;IACrB,OAAQ;QACN,KAAK;YACH,iBAAiB;YACjB;QACF,KAAK;YACH,iBAAiB;YACjB;QACF,KAAK;YACH,iBAAiB;YACjB;IACJ;IAEA,qBACE,6LAAC;QACC,WAAW,GAAG,YAAY,CAAC,EAAE,YAAY,CAAC,EAAE,eAAe,CAAC,EAAE,WAAW;QACxE,GAAG,KAAK;kBAER;;;;;;AAGP;KA/Ca;uCAiDE","debugId":null}},
    {"offset": {"line": 197, "column": 0}, "map": {"version":3,"sources":["file:///Users/rashafaheem/Desktop/todo-app/src/app/components/common/ScrollArea.tsx"],"sourcesContent":["// app/components/ui/scroll-area.tsx\n\"use client\";\n\nimport React, { HTMLAttributes, forwardRef } from \"react\";\n\nexport const ScrollArea = forwardRef<HTMLDivElement, HTMLAttributes<HTMLDivElement>>(({ className, children, ...props }, ref) => {\n  return (\n    <div\n      ref={ref}\n      className={`overflow-y-auto scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-gray-100 ${className}`}\n      {...props}\n    >\n      {children}\n    </div>\n  );\n});\n\nScrollArea.displayName = \"ScrollArea\";\n"],"names":[],"mappings":"AAAA,oCAAoC;;;;;;AAGpC;AAFA;;;AAIO,MAAM,2BAAa,IAAA,2KAAU,OAAiD,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,OAAO,EAAE;IACvH,qBACE,6LAAC;QACC,KAAK;QACL,WAAW,CAAC,iFAAiF,EAAE,WAAW;QACzG,GAAG,KAAK;kBAER;;;;;;AAGP;;AAEA,WAAW,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 231, "column": 0}, "map": {"version":3,"sources":["file:///Users/rashafaheem/Desktop/todo-app/src/app/components/todo/ChatBot.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useRef, useEffect } from \"react\";\nimport { createClient } from \"@supabase/supabase-js\";\nimport { Card, CardContent, CardHeader, CardTitle, CardDescription } from \"../common/Card\";\nimport { Input } from \"../common/Input\";\nimport Button from \"../common/Buttons\";\nimport { ScrollArea } from \"../common/ScrollArea\";\nimport { Send, Bot, User, X, Trash2 } from \"lucide-react\";\n\ninterface Message {\n  id: string;\n  role: \"user\" | \"assistant\";\n  content: string;\n  timestamp: string;\n}\n\nexport function TodoChatbot({ onClose }: { onClose: () => void }) {\n  const [messages, setMessages] = useState<Message[]>([\n    { \n      id: \"1\", \n      role: \"assistant\", \n      content: \"Hi! I'm your todo assistant. Ask me about your tasks, completion rates, or when you completed specific tasks. For example: 'How many todos did I complete this week?' or 'When did I complete my project report?'\", \n      timestamp: new Date().toISOString() \n    }\n  ]);\n  const [input, setInput] = useState(\"\");\n  const [isLoading, setIsLoading] = useState(false);\n  const [userId, setUserId] = useState<string | null>(null);\n  const [authError, setAuthError] = useState<string | null>(null);\n  const scrollRef = useRef<HTMLDivElement>(null);\n\n  // Get authenticated user on component mount\n  useEffect(() => {\n    const getUser = async () => {\n      try {\n        const supabase = createClient(\n          process.env.NEXT_PUBLIC_SUPABASE_URL!,\n          process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!\n        );\n\n        const { data, error } = await supabase.auth.getUser();\n\n        if (error) {\n          console.error(\"Auth error:\", error);\n          setAuthError(\"Failed to get user authentication\");\n          return;\n        }\n\n        if (data.user) {\n          console.log(\"User authenticated:\", data.user.id);\n          setUserId(data.user.id);\n          // Load chat history from localStorage\n          loadChatHistory(data.user.id);\n        } else {\n          setAuthError(\"No user found. Please log in.\");\n        }\n      } catch (err) {\n        console.error(\"Error getting user:\", err);\n        setAuthError(\"Error retrieving authentication\");\n      }\n    };\n\n    getUser();\n  }, []);\n\n  // Auto scroll to bottom when new messages arrive\n  useEffect(() => {\n    if (scrollRef.current) {\n      setTimeout(() => {\n        if (scrollRef.current) {\n          scrollRef.current.scrollTop = scrollRef.current.scrollHeight;\n        }\n      }, 0);\n    }\n  }, [messages]);\n\n  // Load chat history from localStorage\n  const loadChatHistory = (uid: string) => {\n    try {\n      const saved = localStorage.getItem(`chatbot_history_${uid}`);\n      if (saved) {\n        const history = JSON.parse(saved);\n        if (Array.isArray(history) && history.length > 0) {\n          setMessages(history);\n        }\n      }\n    } catch (err) {\n      console.error(\"Error loading chat history:\", err);\n    }\n  };\n\n  // Save chat history to localStorage\n  const saveChatHistory = (msgs: Message[]) => {\n    if (userId) {\n      try {\n        localStorage.setItem(`chatbot_history_${userId}`, JSON.stringify(msgs));\n      } catch (err) {\n        console.error(\"Error saving chat history:\", err);\n      }\n    }\n  };\n\n  // Clear chat history\n  const clearChatHistory = () => {\n    if (userId && window.confirm(\"Are you sure you want to clear the chat history?\")) {\n      setMessages([\n        { \n          id: \"1\", \n          role: \"assistant\", \n          content: \"Hi! I'm your todo assistant. Chat history cleared. Ask me about your tasks!\", \n          timestamp: new Date().toISOString() \n        }\n      ]);\n      try {\n        localStorage.removeItem(`chatbot_history_${userId}`);\n      } catch (err) {\n        console.error(\"Error clearing chat history:\", err);\n      }\n    }\n  };\n\n  const handleSend = async () => {\n    if (!input.trim() || isLoading) return;\n\n    if (!userId) {\n      setMessages(prev => [...prev, { \n        id: Date.now().toString(), \n        role: \"assistant\", \n        content: authError || \"Error: Not authenticated. Please refresh the page and log in.\", \n        timestamp: new Date().toISOString() \n      }]);\n      return;\n    }\n\n    const userMessage: Message = { \n      id: Date.now().toString(), \n      role: \"user\", \n      content: input, \n      timestamp: new Date().toISOString() \n    };\n    \n    const updatedMessages = [...messages, userMessage];\n    setMessages(updatedMessages);\n    saveChatHistory(updatedMessages);\n    setInput(\"\");\n    setIsLoading(true);\n\n    try {\n      const FUNCTION_URL = \"/api/chatbot\";\n      console.log(\"Sending to:\", FUNCTION_URL);\n      console.log(\"User ID:\", userId);\n      console.log(\"Query:\", userMessage.content);\n\n      const response = await fetch(FUNCTION_URL, {\n        method: \"POST\",\n        headers: { \n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify({\n          query: userMessage.content,\n          user_id: userId,\n        }),\n      });\n\n      console.log(\"Response status:\", response.status);\n\n      if (!response.ok) {\n        let errorMsg = \"Failed to get response\";\n        try {\n          const errData = await response.json();\n          errorMsg = errData.error || JSON.stringify(errData);\n        } catch {\n          const text = await response.text();\n          errorMsg = `HTTP ${response.status}: ${text}`;\n        }\n        console.error(\"API Error:\", errorMsg);\n        throw new Error(errorMsg);\n      }\n\n      const data = await response.json();\n      console.log(\"AI Response:\", data.reply?.substring(0, 50) + \"...\");\n\n      const assistantMessage: Message = { \n        id: (Date.now() + 1).toString(), \n        role: \"assistant\", \n        content: data.reply, \n        timestamp: new Date().toISOString() \n      };\n      \n      const finalMessages = [...updatedMessages, assistantMessage];\n      setMessages(finalMessages);\n      saveChatHistory(finalMessages);\n\n    } catch (err) {\n      const errorMsg = err instanceof Error ? err.message : \"Something went wrong.\";\n      console.error(\"Chat error:\", errorMsg);\n      const errorMessage: Message = { \n        id: (Date.now() + 1).toString(), \n        role: \"assistant\", \n        content: `Error: ${errorMsg}`, \n        timestamp: new Date().toISOString() \n      };\n      const finalMessages = [...updatedMessages, errorMessage];\n      setMessages(finalMessages);\n      saveChatHistory(finalMessages);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  return (\n    <Card className=\"h-full flex flex-col rounded-lg border-0\">\n      <CardHeader className=\"border-b flex justify-between items-center p-4\">\n        <div className=\"flex-1\">\n          <CardTitle className=\"flex items-center gap-2 text-lg\">\n            <Bot className=\"h-5 w-5 text-primary\" /> \n            Todo Assistant\n          </CardTitle>\n          <CardDescription className=\"text-xs mt-1\">\n            {userId ? \"Ask me anything about your tasks\" : \"Loading...\"}\n          </CardDescription>\n        </div>\n        <div className=\"flex gap-2\">\n          <Button \n            variant=\"primary\" \n            size=\"sm\" \n            onClick={clearChatHistory}\n            title=\"Clear chat history\"\n          >\n            <Trash2 className=\"h-4 w-4\" />\n          </Button>\n          <Button variant=\"primary\" size=\"sm\" onClick={onClose}>\n            <X className=\"h-4 w-4\" />\n          </Button>\n        </div>\n      </CardHeader>\n\n      <CardContent className=\"flex-1 flex flex-col p-0 overflow-hidden\">\n        <ScrollArea className=\"flex-1 p-4 overflow-y-auto\" ref={scrollRef}>\n          <div className=\"space-y-4 pr-4\">\n            {messages.map(msg => (\n              <div key={msg.id} className={`flex gap-3 ${msg.role === \"user\" ? \"justify-end\" : \"justify-start\"}`}>\n                {msg.role === \"assistant\" && (\n                  <div className=\"h-8 w-8 rounded-full bg-primary flex items-center justify-center flex-shrink-0\">\n                    <Bot className=\"h-4 w-4 text-primary-foreground\" />\n                  </div>\n                )}\n                <div className={`rounded-lg px-4 py-2 max-w-xs break-words ${msg.role === \"user\" ? \"bg-primary text-primary-foreground\" : \"bg-muted text-foreground border border-border\"}`}>\n                  <p className=\"text-sm whitespace-pre-wrap\">{msg.content}</p>\n                  <span className=\"text-xs opacity-70 mt-1 block\">\n                    {new Date(msg.timestamp).toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit' })}\n                  </span>\n                </div>\n                {msg.role === \"user\" && (\n                  <div className=\"h-8 w-8 rounded-full bg-accent flex items-center justify-center flex-shrink-0\">\n                    <User className=\"h-4 w-4 text-accent-foreground\" />\n                  </div>\n                )}\n              </div>\n            ))}\n            {isLoading && (\n              <div className=\"flex gap-3 justify-start\">\n                <div className=\"h-8 w-8 rounded-full bg-primary flex items-center justify-center flex-shrink-0\">\n                  <Bot className=\"h-4 w-4 text-primary-foreground\" />\n                </div>\n                <div className=\"rounded-lg px-4 py-2 bg-muted text-foreground border border-border\">\n                  <p className=\"text-sm animate-pulse\">Thinking...</p>\n                </div>\n              </div>\n            )}\n          </div>\n        </ScrollArea>\n\n        <div className=\"border-t p-4 flex gap-2 bg-background\">\n          <Input \n            value={input} \n            onChange={e => setInput(e.target.value)} \n            onKeyDown={e => e.key === \"Enter\" && !e.shiftKey && handleSend()} \n            placeholder=\"Ask about your todos...\" \n            disabled={isLoading || !userId}\n            className=\"flex-1\"\n          />\n          <Button \n            onClick={handleSend} \n            disabled={isLoading || !userId}\n            size=\"sm\"\n          >\n            <Send className=\"h-4 w-4\" />\n          </Button>\n        </div>\n      </CardContent>\n    </Card>\n  );\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 722, "column": 0}, "map": {"version":3,"sources":["file:///Users/rashafaheem/Desktop/todo-app/src/app/components/common/ChatBotIcon.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState } from \"react\";\nimport { MessageCircle, X } from \"lucide-react\";\nimport { TodoChatbot } from \"../todo/ChatBot\";\n\nexport function ChatbotIcon() {\n  const [isOpen, setIsOpen] = useState(false);\n\n  return (\n    <>\n      {!isOpen && (\n        <button\n          onClick={() => setIsOpen(true)}\n          className=\"fixed bottom-6 right-6 bg-primary hover:bg-primary/90 text-primary-foreground p-4 rounded-full shadow-lg hover:shadow-xl transition-all duration-200 z-40 flex items-center justify-center\"\n          title=\"Open Todo Assistant\"\n        >\n          <MessageCircle className=\"h-6 w-6\" />\n        </button>\n      )}\n\n      {/* Chat Dialog */}\n      {isOpen && (\n        <div className=\"fixed bottom-6 right-6 z-50 w-96 max-h-[600px] rounded-lg shadow-2xl overflow-hidden bg-background\">\n          <TodoChatbot onClose={() => setIsOpen(false)} />\n        </div>\n      )}\n    </>\n  );\n}"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;;;AAJA;;;;AAMO,SAAS;;IACd,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,yKAAQ,EAAC;IAErC,qBACE;;YACG,CAAC,wBACA,6LAAC;gBACC,SAAS,IAAM,UAAU;gBACzB,WAAU;gBACV,OAAM;0BAEN,cAAA,6LAAC,4OAAa;oBAAC,WAAU;;;;;;;;;;;YAK5B,wBACC,6LAAC;gBAAI,WAAU;0BACb,cAAA,6LAAC,8JAAW;oBAAC,SAAS,IAAM,UAAU;;;;;;;;;;;;;AAKhD;GAvBgB;KAAA","debugId":null}},
    {"offset": {"line": 785, "column": 0}, "map": {"version":3,"sources":["file:///Users/rashafaheem/Desktop/todo-app/src/app/%28protected%29/layout.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useEffect } from \"react\";\nimport { useRouter } from \"next/navigation\";\nimport { supabase } from \"../lib/supabase-client\";\nimport { CheckCircle2, LogOut, User, MessageCircle } from \"lucide-react\";\nimport { ChatbotIcon } from \"../components/common/ChatBotIcon\";\nimport type { User as SupabaseUser } from \"@supabase/supabase-js\";\n\nexport default function ProtectedLayout({\n  children,\n}: {\n  children: React.ReactNode;\n}) {\n  const router = useRouter();\n  const [user, setUser] = useState<SupabaseUser | null>(null);\n  const [menuOpen, setMenuOpen] = useState(false);\n  const [chatbotOpen, setChatbotOpen] = useState(false);\n\n  useEffect(() => {\n    const fetchUser = async () => {\n      const { data, error } = await supabase.auth.getUser();\n      if (error || !data.user) {\n        router.push(\"/auth/signin\");\n        return;\n      }\n      setUser(data.user);\n    };\n\n    fetchUser();\n\n    const { data: listener } = supabase.auth.onAuthStateChange(\n      async (_, session) => {\n        if (!session) router.push(\"/auth/signin\");\n        else setUser(session.user);\n      }\n    );\n\n    return () => {\n      listener.subscription.unsubscribe();\n    };\n  }, [router]);\n\n  const handleLogout = async () => {\n    await supabase.auth.signOut();\n    router.push(\"/auth/signin\");\n  };\n\n  if (!user)\n    return (\n      <div className=\"min-h-screen flex items-center justify-center text-lg font-semibold\">\n        Loading user session...\n      </div>\n    );\n\n  const fullName = user.user_metadata?.full_name || \"\";\n  const email = user.email || \"\";\n\n  return (\n    <div className=\"min-h-screen bg-gray-100 text-gray-900\">\n      <header className=\"bg-white shadow-sm sticky top-0 z-40\">\n        <div className=\"max-w-6xl mx-auto px-4 py-4 flex justify-between items-center\">\n          <div\n            className=\"flex items-center gap-2 cursor-pointer\"\n            onClick={() => router.push(\"/todos\")}\n          >\n            <CheckCircle2 className=\"text-blue-600 w-7 h-7\" />\n            <h1 className=\"text-xl font-bold\">My Todo App</h1>\n          </div>\n\n          <div className=\"flex items-center gap-4\">\n            {/* Chatbot Icon Button */}\n            <button\n              onClick={() => setChatbotOpen(!chatbotOpen)}\n              className=\"flex items-center justify-center w-10 h-10 rounded-full bg-blue-500 hover:bg-blue-600 text-white transition-colors duration-200\"\n              title=\"Open Todo Assistant\"\n            >\n              <MessageCircle className=\"w-5 h-5\" />\n            </button>\n\n            {/* Avatar and Menu */}\n            <div className=\"relative\">\n              <button\n                onClick={() => setMenuOpen(!menuOpen)}\n                className=\"flex items-center justify-center w-10 h-10 rounded-full bg-blue-500 text-white font-semibold overflow-hidden hover:ring-2 hover:ring-blue-300 transition-all\"\n              >\n                {user.user_metadata?.avatar_url ? (\n                  <img\n                    src={user.user_metadata.avatar_url}\n                    alt=\"Avatar\"\n                    className=\"w-full h-full object-cover\"\n                  />\n                ) : (\n                  (fullName || email)[0].toUpperCase()\n                )}\n              </button>\n\n              {menuOpen && (\n                <div className=\"absolute right-0 mt-2 w-55 bg-white border rounded-lg shadow-lg py-2 z-50\">\n                  <div className=\"px-4 py-2 border-b\">\n                    <p className=\"text-sm font-medium\">\n                      {fullName || email.split(\"@\")[0]}\n                    </p>\n                    <p className=\"text-xs text-gray-500\">{email}</p>\n                  </div>\n\n                  <button\n                    onClick={() => {\n                      router.push(\"/profile/profile-settings\");\n                      setMenuOpen(false);\n                    }}\n                    className=\"w-full text-left px-4 py-2 text-sm hover:bg-gray-100 flex items-center gap-2\"\n                  >\n                    <User className=\"h-4 w-4\" /> Profile\n                  </button>\n\n                  <button\n                    onClick={handleLogout}\n                    className=\"w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-gray-100 flex items-center gap-2\"\n                  >\n                    <LogOut className=\"h-4 w-4\" /> Log out\n                  </button>\n                </div>\n              )}\n            </div>\n          </div>\n        </div>\n      </header>\n\n      <main className=\"max-w-5xl mx-auto p-6\">{children}</main>\n\n      {/* Chatbot Modal */}\n      {chatbotOpen && (\n        <div className=\"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4\">\n          <div className=\"bg-white rounded-lg shadow-2xl w-full max-w-2xl h-[85vh] flex flex-col\">\n            <ChatbotIcon onClose={() => setChatbotOpen(false)} />\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}"],"names":[],"mappings":"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","debugId":null}}]
}