{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/rashafaheem/Desktop/todo-app/src/app/lib/supabase-client.ts"],"sourcesContent":["import { createClient } from \"@supabase/supabase-js\";\n\n// .env file\nconst supabaseUrl=process.env.NEXT_PUBLIC_SUPABASE_URL!;\nconst supabaseAnonKey=process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!;\n\n// supabase client\nexport const supabase=createClient(supabaseUrl, supabaseAnonKey);"],"names":[],"mappings":";;;;AAGkB;AAHlB;;AAEA,YAAY;AACZ,MAAM;AACN,MAAM;AAGC,MAAM,WAAS,IAAA,0MAAY,EAAC,aAAa","debugId":null}},
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":["file:///Users/rashafaheem/Desktop/todo-app/src/app/%28protected%29/layout.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useEffect } from \"react\";\nimport { useRouter } from \"next/navigation\";\nimport { supabase } from \"../lib/supabase-client\";\nimport { CheckCircle2, LogOut, User, MessageCircle } from \"lucide-react\";\nimport { ChatbotIcon } from \"../components/common/ChatBotIcon\";\nimport type { User as SupabaseUser } from \"@supabase/supabase-js\";\n\nexport default function ProtectedLayout({\n  children,\n}: {\n  children: React.ReactNode;\n}) {\n  const router = useRouter();\n  const [user, setUser] = useState<SupabaseUser | null>(null);\n  const [menuOpen, setMenuOpen] = useState(false);\n  const [chatbotOpen, setChatbotOpen] = useState(false);\n\n  useEffect(() => {\n    const fetchUser = async () => {\n      const { data, error } = await supabase.auth.getUser();\n      if (error || !data.user) {\n        router.push(\"/auth/signin\");\n        return;\n      }\n      setUser(data.user);\n    };\n\n    fetchUser();\n\n    const { data: listener } = supabase.auth.onAuthStateChange(\n      async (_, session) => {\n        if (!session) router.push(\"/auth/signin\");\n        else setUser(session.user);\n      }\n    );\n\n    return () => {\n      listener.subscription.unsubscribe();\n    };\n  }, [router]);\n\n  const handleLogout = async () => {\n    await supabase.auth.signOut();\n    router.push(\"/auth/signin\");\n  };\n\n  if (!user)\n    return (\n      <div className=\"min-h-screen flex items-center justify-center text-lg font-semibold\">\n        Loading user session...\n      </div>\n    );\n\n  const fullName = user.user_metadata?.full_name || \"\";\n  const email = user.email || \"\";\n\n  return (\n    <div className=\"min-h-screen bg-gray-100 text-gray-900\">\n      <header className=\"bg-white shadow-sm sticky top-0 z-40\">\n        <div className=\"max-w-6xl mx-auto px-4 py-4 flex justify-between items-center\">\n          <div\n            className=\"flex items-center gap-2 cursor-pointer\"\n            onClick={() => router.push(\"/todos\")}\n          >\n            <CheckCircle2 className=\"text-blue-600 w-7 h-7\" />\n            <h1 className=\"text-xl font-bold\">My Todo App</h1>\n          </div>\n\n          <div className=\"flex items-center gap-4\">\n            {/* Chatbot Icon Button */}\n            <button\n              onClick={() => setChatbotOpen(!chatbotOpen)}\n              className=\"flex items-center justify-center w-10 h-10 rounded-full bg-blue-500 hover:bg-blue-600 text-white transition-colors duration-200\"\n              title=\"Open Todo Assistant\"\n            >\n              <MessageCircle className=\"w-5 h-5\" />\n            </button>\n\n            {/* Avatar and Menu */}\n            <div className=\"relative\">\n              <button\n                onClick={() => setMenuOpen(!menuOpen)}\n                className=\"flex items-center justify-center w-10 h-10 rounded-full bg-blue-500 text-white font-semibold overflow-hidden hover:ring-2 hover:ring-blue-300 transition-all\"\n              >\n                {user.user_metadata?.avatar_url ? (\n                  <img\n                    src={user.user_metadata.avatar_url}\n                    alt=\"Avatar\"\n                    className=\"w-full h-full object-cover\"\n                  />\n                ) : (\n                  (fullName || email)[0].toUpperCase()\n                )}\n              </button>\n\n              {menuOpen && (\n                <div className=\"absolute right-0 mt-2 w-55 bg-white border rounded-lg shadow-lg py-2 z-50\">\n                  <div className=\"px-4 py-2 border-b\">\n                    <p className=\"text-sm font-medium\">\n                      {fullName || email.split(\"@\")[0]}\n                    </p>\n                    <p className=\"text-xs text-gray-500\">{email}</p>\n                  </div>\n\n                  <button\n                    onClick={() => {\n                      router.push(\"/profile/profile-settings\");\n                      setMenuOpen(false);\n                    }}\n                    className=\"w-full text-left px-4 py-2 text-sm hover:bg-gray-100 flex items-center gap-2\"\n                  >\n                    <User className=\"h-4 w-4\" /> Profile\n                  </button>\n\n                  <button\n                    onClick={handleLogout}\n                    className=\"w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-gray-100 flex items-center gap-2\"\n                  >\n                    <LogOut className=\"h-4 w-4\" /> Log out\n                  </button>\n                </div>\n              )}\n            </div>\n          </div>\n        </div>\n      </header>\n\n      <main className=\"max-w-5xl mx-auto p-6\">{children}</main>\n\n      {/* Chatbot Modal */}\n      {chatbotOpen && (\n        <div className=\"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4 overflow-hidden\">\n          <div className=\"bg-white rounded-xl w-full max-w-2xl h-[90vh] flex flex-col shadow-2xl\">\n            <TodoChatbot onClose={() => setChatbotOpen(false)} />\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}"],"names":[],"mappings":"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","debugId":null}}]
}