{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/rashafaheem/Desktop/todo-app/src/app/lib/supabase-client.ts"],"sourcesContent":["import { createClient } from \"@supabase/supabase-js\";\n\n// .env file\nconst supabaseUrl=process.env.NEXT_PUBLIC_SUPABASE_URL!;\nconst supabaseAnonKey=process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!;\n\n// supabase client\nexport const supabase=createClient(supabaseUrl, supabaseAnonKey);"],"names":[],"mappings":";;;;AAGkB;AAHlB;;AAEA,YAAY;AACZ,MAAM;AACN,MAAM;AAGC,MAAM,WAAS,IAAA,0MAAY,EAAC,aAAa","debugId":null}},
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":["file:///Users/rashafaheem/Desktop/todo-app/src/app/components/todo/ChatBot.tsx"],"sourcesContent":["import { createClient } from \"@supabase/supabase-js\";\n\nconst OPENAI_API_KEY = process.env.OPENAI_API_KEY!;\nconst SUPABASE_URL = process.env.NEXT_PUBLIC_SUPABASE_URL!;\nconst SERVICE_ROLE_KEY = process.env.SERVICE_ROLE_KEY!;\n\nconst supabase = createClient(SUPABASE_URL, SERVICE_ROLE_KEY);\n\nasync function generateEmbedding(text: string): Promise<number[]> {\n  try {\n    const response = await fetch(\"https://api.openai.com/v1/embeddings\", {\n      method: \"POST\",\n      headers: {\n        \"Authorization\": `Bearer ${OPENAI_API_KEY}`,\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify({\n        model: \"text-embedding-3-small\",\n        input: text,\n      }),\n    });\n\n    const data = await response.ok ? await response.json() : { data: [{ embedding: [] }] };\n    return data.data[0].embedding;\n  } catch (err) {\n    console.error(\"Embedding error:\", err);\n    return [];\n  }\n}\n\nasync function callOpenAI(systemPrompt: string, userQuery: string): Promise<string> {\n  const response = await fetch(\"https://api.openai.com/v1/chat/completions\", {\n    method: \"POST\",\n    headers: {\n      \"Authorization\": `Bearer ${OPENAI_API_KEY}`,\n      \"Content-Type\": \"application/json\",\n    },\n    body: JSON.stringify({\n      model: \"gpt-3.5-turbo\",\n      messages: [\n        { role: \"system\", content: systemPrompt },\n        { role: \"user\", content: userQuery }\n      ],\n      max_tokens: 1024,\n      temperature: 0.7,\n    }),\n  });\n\n  const data = response.ok ? await response.json() : null;\n  return data?.choices?.[0]?.message?.content ?? \n    (() => { throw new Error(`OpenAI error: ${response.statusText}`); })();\n}\n\nexport async function POST(req: Request) {\n  try {\n    const { user_id, query } = await req.json();\n\n    const missingFields = [\n      !user_id && \"user_id\",\n      !query && \"query\"\n    ].filter(Boolean);\n\n    if (missingFields.length > 0) {\n      return new Response(\n        JSON.stringify({ error: `${missingFields.join(\" and \")} are required` }),\n        { status: 400, headers: { \"Content-Type\": \"application/json\" } }\n      );\n    }\n\n    console.log(\"User query:\", query);\n    console.log(\"Fetching todos for user:\", user_id);\n\n    const { data: todos, error: todosErr } = await supabase\n      .from(\"todos\")\n      .select(\"id, title, is_completed, created_at, updated_at, notes\")\n      .eq(\"user_id\", user_id)\n      .order(\"created_at\", { ascending: false });\n\n    if (todosErr) throw todosErr;\n\n    // Handle empty todos case\n    const noTodosResponse = (!todos || todos.length === 0) && {\n      reply: \"You don't have any todos yet. Create some tasks to get started!\"\n    };\n\n    if (noTodosResponse) {\n      return new Response(\n        JSON.stringify(noTodosResponse),\n        { status: 200, headers: { \"Content-Type\": \"application/json\" } }\n      );\n    }\n\n    // Calculate statistics using functional approach\n    const todoStats = {\n      total: todos.length,\n      completed: todos.filter((t: any) => t.is_completed).length,\n      pending: todos.filter((t: any) => !t.is_completed).length,\n    };\n\n    // Time period calculations\n    const today = new Date();\n    const todayStart = new Date(today.getFullYear(), today.getMonth(), today.getDate());\n    const weekStart = new Date(today.getTime() - today.getDay() * 24 * 60 * 60 * 1000);\n    const monthStart = new Date(today.getFullYear(), today.getMonth(), 1);\n\n    const filterByDate = (startDate: Date) => \n      todos.filter((t: any) => new Date(t.created_at) >= startDate);\n\n    const todaysTodos = filterByDate(todayStart);\n    const thisWeekTodos = filterByDate(weekStart);\n    const thisMonthTodos = filterByDate(monthStart);\n\n    const countCompleted = (todos: any[]) => \n      todos.filter((t: any) => t.is_completed).length;\n\n    const completedToday = countCompleted(todaysTodos);\n    const completedThisWeek = countCompleted(thisWeekTodos);\n    const completedThisMonth = countCompleted(thisMonthTodos);\n\n    // Format todos for display\n    const formatTodo = (t: any) => {\n      const date = new Date(t.created_at).toLocaleDateString('en-US', { \n        weekday: 'short', \n        month: 'short', \n        day: 'numeric' \n      });\n      const status = t.is_completed ? \"✓ DONE\" : \"⏳ PENDING\";\n      const noteStr = t.notes ? ` (${t.notes})` : \"\";\n      return `${status} - \"${t.title}\" (${date})${noteStr}`;\n    };\n\n    const recentTodos = todos.slice(0, 10).map(formatTodo).join(\"\\n\");\n\n    // Format completed todos with dates\n    const completedTodosFormatted = todos\n      .filter((t: any) => t.is_completed && t.updated_at)\n      .sort((a: any, b: any) => new Date(b.updated_at).getTime() - new Date(a.updated_at).getTime())\n      .slice(0, 15)\n      .map((t: any) => {\n        const completedDate = new Date(t.updated_at).toLocaleDateString('en-US', { \n          weekday: 'long', \n          month: 'long', \n          day: 'numeric' \n        });\n        return `- \"${t.title}\" - Completed on ${completedDate}`;\n      })\n      .join(\"\\n\");\n\n    // Build comprehensive context for AI\n    const contextData = `\nSTATISTICAL SUMMARY:\n- Total Todos: ${todoStats.total}\n- Completed: ${todoStats.completed} (${((todoStats.completed / todoStats.total) * 100).toFixed(1)}%)\n- Pending: ${todoStats.pending}\n\nTIME PERIOD BREAKDOWN:\n- Created Today: ${todaysTodos.length} (Completed: ${completedToday})\n- Created This Week: ${thisWeekTodos.length} (Completed: ${completedThisWeek})\n- Created This Month: ${thisMonthTodos.length} (Completed: ${completedThisMonth})\n\nRECENT TODOS (Last 10):\n${recentTodos}\n\nRECENTLY COMPLETED TODOS WITH DATES:\n${completedTodosFormatted || \"No completed todos yet\"}\n\nIMPORTANT NOTES:\n- This system tracks completion status (completed/pending) but NOT deleted todos\n- Use the \"updated_at\" field for completion dates\n- All statistics and dates are provided above - use them directly`;\n\n    const systemPrompt = `You are a highly helpful and conversational Todo Assistant with access to the user's complete task management database.\n\nANALYSIS FRAMEWORK:\nAutomatically identify what the user is asking for:\n- Date/Time queries (when, date, completed on): Focus on completion dates from \"RECENTLY COMPLETED TODOS\"\n- Count queries (how many, total, count): Use statistics and percentages\n- Time period queries (today, this week, this month): Use \"TIME PERIOD BREAKDOWN\"\n- Status queries (pending, incomplete, not done): Use completion status data\n- Deletion queries: Explain we track completion, not deletion\n- General queries: Provide relevant overview from all available data\n\nRESPONSE GUIDELINES:\n- Always provide SPECIFIC numbers and dates from the data\n- Be friendly, concise, and conversational\n- Add context to numbers (e.g., \"8 out of 15 todos, which is 53%\")\n- Use exact dates for completion queries\n- Include percentages for count queries when relevant\n- NEVER make up data - only use what's provided\n- Be encouraging with users who haven't completed many todos yet\n- Answer naturally without mentioning the analysis framework\n\nDATA PROVIDED:\nAll necessary data is in the context below. Analyze the user's question and respond appropriately.`;\n\n    const enhancedQuery = `${contextData}\\n\\nUser Question: ${query}`;\n\n    console.log(\"Calling OpenAI with comprehensive context...\");\n\n    const aiResponse = await callOpenAI(systemPrompt, enhancedQuery);\n\n    console.log(\"AI Response generated, length:\", aiResponse.length);\n\n    // Generate embedding for the query\n    const embedding = await generateEmbedding(query);\n\n    // Store conversation history\n    await supabase.from(\"ai_chat_history\").insert([\n      {\n        user_id,\n        query,\n        response: aiResponse,\n        embedding: embedding.length > 0 ? embedding : null,\n        todo_context: {\n          stats: todoStats,\n          todos_count: todos.length,\n          period_breakdown: {\n            today: completedToday,\n            this_week: completedThisWeek,\n            this_month: completedThisMonth,\n          },\n        },\n      },\n    ]);\n\n    return new Response(JSON.stringify({ reply: aiResponse }), {\n      status: 200,\n      headers: { \"Content-Type\": \"application/json\" },\n    });\n  } catch (err) {\n    console.error(\"Error:\", err);\n    return new Response(\n      JSON.stringify({ \n        error: err instanceof Error ? err.message : \"Internal server error\",\n        reply: \"Sorry, I encountered an error processing your request. Please try again.\"\n      }),\n      { status: 500, headers: { \"Content-Type\": \"application/json\" } }\n    );\n  }\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 262, "column": 0}, "map": {"version":3,"sources":["file:///Users/rashafaheem/Desktop/todo-app/src/app/components/common/ChatBotIcon.tsx"],"sourcesContent":["\"use client\";\n\nimport { TodoChatbot } from \"../todo/ChatBot\";\n\ninterface ChatbotIconProps {\n  onClose: () => void;\n}\n\nexport function ChatbotIcon({ onClose }: ChatbotIconProps) {\n  return <TodoChatbot onClose={onClose} />;\n}"],"names":[],"mappings":";;;;;AAEA;AAFA;;;AAQO,SAAS,YAAY,EAAE,OAAO,EAAoB;IACvD,qBAAO,6LAAC,8JAAW;QAAC,SAAS;;;;;;AAC/B;KAFgB","debugId":null}},
    {"offset": {"line": 290, "column": 0}, "map": {"version":3,"sources":["file:///Users/rashafaheem/Desktop/todo-app/src/app/%28protected%29/layout.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useEffect } from \"react\";\nimport { useRouter } from \"next/navigation\";\nimport { supabase } from \"../lib/supabase-client\";\nimport { CheckCircle2, LogOut, User, MessageCircle } from \"lucide-react\";\nimport { ChatbotIcon } from \"../components/common/ChatBotIcon\";\nimport type { User as SupabaseUser } from \"@supabase/supabase-js\";\n\nexport default function ProtectedLayout({\n  children,\n}: {\n  children: React.ReactNode;\n}) {\n  const router = useRouter();\n  const [user, setUser] = useState<SupabaseUser | null>(null);\n  const [menuOpen, setMenuOpen] = useState(false);\n  const [chatbotOpen, setChatbotOpen] = useState(false);\n\n  useEffect(() => {\n    const fetchUser = async () => {\n      const { data, error } = await supabase.auth.getUser();\n      if (error || !data.user) {\n        router.push(\"/auth/signin\");\n        return;\n      }\n      setUser(data.user);\n    };\n\n    fetchUser();\n\n    const { data: listener } = supabase.auth.onAuthStateChange(\n      async (_, session) => {\n        if (!session) router.push(\"/auth/signin\");\n        else setUser(session.user);\n      }\n    );\n\n    return () => {\n      listener.subscription.unsubscribe();\n    };\n  }, [router]);\n\n  const handleLogout = async () => {\n    await supabase.auth.signOut();\n    router.push(\"/auth/signin\");\n  };\n\n  if (!user)\n    return (\n      <div className=\"min-h-screen flex items-center justify-center text-lg font-semibold\">\n        Loading user session...\n      </div>\n    );\n\n  const fullName = user.user_metadata?.full_name || \"\";\n  const email = user.email || \"\";\n\n  return (\n    <div className=\"min-h-screen bg-gray-100 text-gray-900\">\n      <header className=\"bg-white shadow-sm sticky top-0 z-40\">\n        <div className=\"max-w-6xl mx-auto px-4 py-4 flex justify-between items-center\">\n          <div\n            className=\"flex items-center gap-2 cursor-pointer\"\n            onClick={() => router.push(\"/todos\")}\n          >\n            <CheckCircle2 className=\"text-blue-600 w-7 h-7\" />\n            <h1 className=\"text-xl font-bold\">My Todo App</h1>\n          </div>\n\n          <div className=\"flex items-center gap-4\">\n            {/* Chatbot Icon Button */}\n            <button\n              onClick={() => setChatbotOpen(!chatbotOpen)}\n              className=\"flex items-center justify-center w-10 h-10 rounded-full bg-blue-500 hover:bg-blue-600 text-white transition-colors duration-200\"\n              title=\"Open Todo Assistant\"\n            >\n              <MessageCircle className=\"w-5 h-5\" />\n            </button>\n\n            {/* Avatar and Menu */}\n            <div className=\"relative\">\n              <button\n                onClick={() => setMenuOpen(!menuOpen)}\n                className=\"flex items-center justify-center w-10 h-10 rounded-full bg-blue-500 text-white font-semibold overflow-hidden hover:ring-2 hover:ring-blue-300 transition-all\"\n              >\n                {user.user_metadata?.avatar_url ? (\n                  <img\n                    src={user.user_metadata.avatar_url}\n                    alt=\"Avatar\"\n                    className=\"w-full h-full object-cover\"\n                  />\n                ) : (\n                  (fullName || email)[0].toUpperCase()\n                )}\n              </button>\n\n              {menuOpen && (\n                <div className=\"absolute right-0 mt-2 w-55 bg-white border rounded-lg shadow-lg py-2 z-50\">\n                  <div className=\"px-4 py-2 border-b\">\n                    <p className=\"text-sm font-medium\">\n                      {fullName || email.split(\"@\")[0]}\n                    </p>\n                    <p className=\"text-xs text-gray-500\">{email}</p>\n                  </div>\n\n                  <button\n                    onClick={() => {\n                      router.push(\"/profile/profile-settings\");\n                      setMenuOpen(false);\n                    }}\n                    className=\"w-full text-left px-4 py-2 text-sm hover:bg-gray-100 flex items-center gap-2\"\n                  >\n                    <User className=\"h-4 w-4\" /> Profile\n                  </button>\n\n                  <button\n                    onClick={handleLogout}\n                    className=\"w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-gray-100 flex items-center gap-2\"\n                  >\n                    <LogOut className=\"h-4 w-4\" /> Log out\n                  </button>\n                </div>\n              )}\n            </div>\n          </div>\n        </div>\n      </header>\n\n      <main className=\"max-w-5xl mx-auto p-6\">{children}</main>\n\n      {/* Chatbot Modal */}\n      {chatbotOpen && (\n        <div className=\"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4\">\n          <div className=\"bg-white rounded-lg shadow-2xl w-full max-w-2xl h-[85vh] flex flex-col\">\n            <ChatbotIcon onClose={() => setChatbotOpen(false)} />\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}"],"names":[],"mappings":"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","debugId":null}}]
}